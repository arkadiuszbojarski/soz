/*! SOZZ 13-07-2015 */
angular.module("myApp",["ui.router","ui.utils","ui.bootstrap","pascalprecht.translate","ngResource","ngCookies","myApp.controllers","myApp.services"]),angular.module("myApp.controllers",[]),angular.module("myApp.services",[]),angular.module("myApp.controllers").controller("AccountsListController",["$scope","$modal","user","accounts","Account",function(a,b,c,d,e){a.itemsPerPage=d.size,a.currentPage=d.number+1,a.maxSize=5,a.totalItems=d.totalElements,a.sort=d.sort[0]?d.sort[0].property:null,a.reverse=d.sort[0]?!d.sort[0].ascending:!1,a.accounts=d.content,a.user=c,a.query=null,a.search=function(b,c){e.page({query:b?b:void 0,page:c-1,size:a.itemsPerPage,direction:a.reverse?"DESC":"ASC",property:a.sort}).$promise.then(function(b){a.itemsPerPage=b.size,a.currentPage=b.number+1,a.totalItems=b.totalElements,a.sort=b.sort[0]?b.sort[0].property:null,a.reverse=b.sort[0]?!b.sort[0].ascending:!1,a.accounts=b.content})},a.clear_search=function(){a.query=null,a.search(a.query,1)},a.reverse_order=function(){a.reverse=!a.reverse,a.search(a.query,a.currentPage)},a.open_create_account_form=function(){var c=b.open({animation:!0,templateUrl:"partials/account/newAccount.html",controller:"AccountAddController"});c.result.then(function(){},function(){a.search(a.query,a.currentPage)})},a.open_edit_account_form=function(c){var d=b.open({animation:!0,templateUrl:"partials/account/editAccount.html",controller:"AccountEditController",resolve:{edited:function(){return c},roles:function(){return e.roles().$promise}}});d.result.then(function(){},function(){a.search(a.query,a.currentPage)})}}]).controller("AccountAddController",["$scope","$modalInstance","$timeout","focus","Account",function(a,b,c,d,e){a.account={},a.errors=[],a.alert=null;var f=null;a.action_account=function(){new e({username:a.account.username,email:a.account.email,password:a.account.password,passwordRepeated:a.account.passwordRepeated}).$save().then(function(b){a.account={},a.errors=[],d("email"),a.alert={type:"success",msg:"new.account.created"},c.cancel(f),f=c(function(){a.alert=null},3e3)},function(d){401!==d.status&&403!==d.status?a.errors=d.data:(c.cancel(f),b.dismiss("exit"))})},a.exit=function(){c.cancel(f),b.dismiss("exit")}}]).controller("AccountEditController",["$scope","$modalInstance","$timeout","focus","edited","roles","Account",function(a,b,c,d,e,f,g){a.account=e,a.errors=[],a.alert=null,a.roles=f,a.options=[{value:!0},{value:!1}];var h=null;a.action_account=function(){g.update({id:a.account.id},a.account,function(b){a.account=b,a.errors=[],d("username"),a.alert={type:"success",msg:"account.edited"},c.cancel(h),h=c(function(){a.alert=null},3e3)},function(d){401!==d.status&&403!==d.status?a.errors=d.data:(c.cancel(h),b.dismiss("exit"))})},a.exit=function(){c.cancel(h),b.dismiss("exit")}}]).controller("PasswordChangeController",["$scope","$modalInstance","$timeout","focus","Account",function(a,b,c,d,e){a.passwordChange={},a.errors=[],a.alert=null;var f=null;a.password_change=function(){e.changeMyPassword(a.passwordChange,function(b){a.passwordChange={},a.errors=[],d("passwordOld"),a.alert={type:"success",msg:"password.edited"},c.cancel(f),f=c(function(){a.alert=null},3e3)},function(d){401!==d.status&&403!==d.status?a.errors=d.data:(c.cancel(f),b.dismiss("exit"))})},a.exit=function(){c.cancel(f),b.dismiss("exit")}}]),angular.module("myApp.controllers").controller("AuthenticationController",["$scope","$rootScope","$state","$modal","user","TokenStore",function(a,b,c,d,e,f){a.user=e,a.logout=function(){f.clear(),b.user=null,c.transitionTo("login")},a.open_change_password_form=function(){d.open({animation:!0,templateUrl:"partials/account/passwordChange.html",controller:"PasswordChangeController"})},b.isAdmin=function(){return a.user&&"ADMIN"===a.user.role}}]),angular.module("myApp.controllers").controller("CategoriesListController",["$scope","$modal","user","categories","Category",function(a,b,c,d,e){a.itemsPerPage=d.size,a.currentPage=d.number+1,a.maxSize=5,a.totalItems=d.totalElements,a.sort=d.sort[0]?d.sort[0].property:null,a.reverse=d.sort[0]?!d.sort[0].ascending:!1,a.categories=d.content,a.user=c,a.query=null,a.search=function(b,c){e.page({query:b?b:void 0,page:c-1,size:a.itemsPerPage,direction:a.reverse?"DESC":"ASC",property:a.sort}).$promise.then(function(b){a.itemsPerPage=b.size,a.currentPage=b.number+1,a.totalItems=b.totalElements,a.sort=b.sort[0]?b.sort[0].property:null,a.reverse=b.sort[0]?!b.sort[0].ascending:!1,a.categories=b.content})},a.clear_search=function(){a.query=null,a.search(a.query,1)},a.reverse_order=function(){a.reverse=!a.reverse,a.search(a.query,a.currentPage)},a.open_create_category_form=function(){var c=b.open({animation:!0,templateUrl:"partials/category/category.html",controller:"CategoryAddController"});c.result.then(function(){},function(){a.search(a.query,a.currentPage)})},a.open_edit_category_form=function(c){var d=b.open({animation:!0,templateUrl:"partials/category/category.html",controller:"CategoryEditController",resolve:{edited:function(){return c}}});d.result.then(function(){},function(){a.search(a.query,a.currentPage)})},a.delete_category=function(c){e.remove({},{id:c.id},function(){a.search(a.query,a.currentPage)},function(a){401!==a.status&&403!==a.status&&b.open({animation:!0,templateUrl:"partials/error.html",controller:"ErrorController",resolve:{error:function(){return a}}})})}}]).controller("CategoryAddController",["$scope","$modalInstance","$timeout","focus","Category",function(a,b,c,d,e){a.category={},a.errors=[],a.alert=null;var f=null;a.action_category=function(){new e({name:a.category.name}).$save().then(function(b){a.category={},a.errors=[],d("name"),a.alert={type:"success",msg:"new.category.created"},c.cancel(f),f=c(function(){a.alert=null},3e3)},function(d){401!==d.status&&403!==d.status?a.errors=d.data:(c.cancel(f),b.dismiss("exit"))})},a.exit=function(){c.cancel(f),b.dismiss("exit")}}]).controller("CategoryEditController",["$scope","$modalInstance","$timeout","focus","edited","Category",function(a,b,c,d,e,f){a.category=e,a.errors=[],a.alert=null;var g=null;a.action_category=function(){f.update({id:a.category.id},a.category,function(b){a.category=b,a.errors=[],d("name"),a.alert={type:"success",msg:"category.edited"},c.cancel(g),g=c(function(){a.alert=null},3e3)},function(d){401!==d.status&&403!==d.status?a.errors=d.data:(c.cancel(g),b.dismiss("exit"))})},a.exit=function(){c.cancel(g),b.dismiss("exit")}}]),angular.module("myApp.controllers").controller("DrawingsListController",["$scope","$modal","user","drawings","Drawing",function(a,b,c,d,e){a.itemsPerPage=d.size,a.currentPage=d.number+1,a.maxSize=5,a.totalItems=d.totalElements,a.sort=d.sort[0]?d.sort[0].property:null,a.reverse=d.sort[0]?!d.sort[0].ascending:!1,a.drawings=d.content,a.user=c,a.query=null,a.search=function(b,c){e.page({query:b?b:void 0,page:c-1,size:a.itemsPerPage,direction:a.reverse?"DESC":"ASC",property:a.sort}).$promise.then(function(b){a.itemsPerPage=b.size,a.currentPage=b.number+1,a.totalItems=b.totalElements,a.sort=b.sort[0]?b.sort[0].property:null,a.reverse=b.sort[0]?!b.sort[0].ascending:!1,a.drawings=b.content})},a.clear_search=function(){a.query=null,a.search(a.query,1)},a.reverse_order=function(){a.reverse=!a.reverse,a.search(a.query,a.currentPage)},a.open_create_drawing_form=function(){var c=b.open({animation:!0,templateUrl:"partials/drawing/drawing.html",controller:"DrawingAddController"});c.result.then(function(){},function(){a.search(a.query,a.currentPage)})},a.open_edit_drawing_form=function(c){var d=b.open({animation:!0,templateUrl:"partials/drawing/drawing.html",controller:"DrawingEditController",resolve:{edited:function(){return c}}});d.result.then(function(){},function(){a.search(a.query,a.currentPage)})},a.delete_drawing=function(c){e.remove({id:c.id}).$promise.then(function(){a.search(a.query,a.currentPage)},function(a){401!==a.status&&403!==a.status&&b.open({animation:!0,templateUrl:"partials/error.html",controller:"ErrorController",resolve:{error:function(){return a}}})})}}]).controller("DrawingAddController",["$scope","$modalInstance","$timeout","focus","Drawing",function(a,b,c,d,e){a.drawing={},a.errors=[],a.alert=null;var f=null;a.action_drawing=function(){new e({number:a.drawing.number}).$save().then(function(b){a.drawing={},a.errors=[],d("number"),a.alert={type:"success",msg:"new.drawing.created"},c.cancel(f),f=c(function(){a.alert=null},3e3)},function(d){401!==d.status&&403!==d.status?a.errors=d.data:(c.cancel(f),b.dismiss("exit"))})},a.exit=function(){c.cancel(f),b.dismiss("exit")}}]).controller("DrawingEditController",["$scope","$modalInstance","$timeout","focus","edited","Drawing",function(a,b,c,d,e,f){a.drawing=e,a.errors=[],a.alert=null;var g=null;a.action_drawing=function(){f.update({id:a.drawing.id},a.drawing,function(b){a.drawing=b,a.errors=[],d("name"),a.alert={type:"success",msg:"drawing.edited"},c.cancel(g),g=c(function(){a.alert=null},3e3)},function(d){401!==d.status&&403!==d.status?a.errors=d.data:(c.cancel(g),b.dismiss("exit"))})},a.exit=function(){c.cancel(g),b.dismiss("exit")}}]),angular.module("myApp.controllers").controller("ErrorController",["$scope","$modalInstance","error",function(a,b,c){a.error=c,a.exit=function(){b.dismiss("exit")}}]),angular.module("myApp.controllers").controller("ForbiddenController",["$scope","user",function(a,b){a.user=b}]),angular.module("myApp.controllers").controller("LoginController",["$scope","$http","$state","$stateParams","TokenStore",function(a,b,c,d,e){a.error=d.error?d.error:!1;var f=function(d){b.post("/api/login",d).success(function(b,d,f){a.error=!1,e.store(f("X-AUTH-TOKEN")),c.go("authenticated.requisitions")}).error(function(){a.error=!0,e.clear(),c.go("login")})};a.login=function(){f(a.credentials)}}]),angular.module("myApp.controllers").controller("PartsListController",["$scope","$modal","user","parts","Part",function(a,b,c,d,e){a.itemsPerPage=d.size,a.currentPage=d.number+1,a.maxSize=5,a.totalItems=d.totalElements,a.sort=d.sort[0]?d.sort[0].property:null,a.reverse=d.sort[0]?!d.sort[0].ascending:!1,a.parts=d.content,a.user=c,a.query=null,a.conditions=null,a.search=function(b,c,d){e.page({query:b?b:void 0,number:c&&c.number?c.number:void 0,description:c&&c.description?c.description:void 0,category:c&&c.category?c.category:void 0,meterial:c&&c.material?c.material:void 0,supplier:c&&c.supplier?c.supplier:void 0,page:d-1,size:a.itemsPerPage,direction:a.reverse?"DESC":"ASC",property:a.sort}).$promise.then(function(b){a.itemsPerPage=b.size,a.currentPage=b.number+1,a.totalItems=b.totalElements,a.sort=b.sort[0]?b.sort[0].property:null,a.reverse=b.sort[0]?!b.sort[0].ascending:!1,a.parts=b.content})},a.clear_search=function(){a.query="",a.search(a.query,a.conditions,1)},a.reverse_order=function(){a.reverse=!a.reverse,a.search(a.query,a.conditions,a.currentPage)},a.change_sort=function(){a.search(a.query,a.conditions,a.currentPage)},a.basic_search=function(){a.conditions=null,a.search(a.query,a.conditions,1)},a.clear_condition=function(b){a.conditions[b]=null,a.search(a.query,a.conditions,1)},a.open_create_part_form=function(){var c=b.open({animation:!0,templateUrl:"partials/part/part.html",controller:"PartAddController"});c.result.then(function(){},function(){a.search(a.query,a.conditions,a.currentPage)})},a.open_edit_part_form=function(c){var d=b.open({animation:!0,templateUrl:"partials/part/part.html",controller:"PartEditController",resolve:{edited:function(){return c}}});d.result.then(function(){},function(){a.search(a.query,a.conditions,a.currentPage)})},a.open_search_part_form=function(){var c=b.open({animation:!0,templateUrl:"partials/part/searchPart.html",controller:"PartSearchController",resolve:{conditions:function(){return a.conditions}}});c.result.then(function(b){a.conditions=b,a.query=null,a.search(a.query,a.conditions,1)})},a.delete_part=function(c){e.remove({id:c.id}).$promise.then(function(){a.search(a.query,a.conditions,a.currentPage)},function(a){401!==a.status&&403!==a.status&&b.open({animation:!0,templateUrl:"partials/error.html",controller:"ErrorController",resolve:{error:function(){return a}}})})}}]).controller("PartAddController",["$scope","$modalInstance","$timeout","focus","Part","Category","Supplier","Unit",function(a,b,c,d,e,f,g,h){a.categories=[],a.suppliers=[],a.units=[],a.part={category:{},supplier:{contact:{address:{}}},dimensions:[]},a.errors=[],a.alert=null;var i=null;a.hint_categories=function(b){f.page({query:b}).$promise.then(function(b){a.categories=b.content})},a.hint_units=function(b){h.page({query:b}).$promise.then(function(b){a.units=b.content})},a.hint_suppliers=function(b){g.page({query:b}).$promise.then(function(b){a.suppliers=b.content})},a.categorySelect=function(b,c,d){a.part.category={id:b.id,name:b.name}},a.unitSelect=function(a,b,c,d){d.unit={id:a.id,name:a.name}},a.supplierSelect=function(b,c,d){a.part.supplier={id:b.id,name:b.name,contact:b.contact?{email:b.contact.email,web_site:b.contact.web_site,phone:b.contact.phone,address:b.contact.address?{country:b.contact.address.country,city:b.contact.address.city,postal_code:b.contact.address.postal_code,street:b.contact.address.street}:{}}:{address:{}}}},a.add_new_dimension=function(){a.part.dimensions.push({name:"",value:"",unit:{name:""}})},a.remove_dimension=function(b){a.part.dimensions.splice(a.part.dimensions.indexOf(b),1)},a.clear_unit_id=function(a){a.id=void 0};var j=function(){return!a.part.supplier.id&&(a.part.supplier.name||a.part.supplier.contact.email||a.part.supplier.contact.web_site||a.part.supplier.contact.phone||a.part.supplier.contact.address.country||a.part.supplier.contact.address.city||a.part.supplier.contact.address.postal_code||a.part.supplier.contact.address.street)};a.action_part=function(){var f=new e;f.number=a.part.number,f.description=a.part.description,f.category=a.part.category.id?a.part.category:a.part.category.name?{name:a.part.category.name}:void 0,f.material=a.part.material,f.dimensions=a.part.dimensions,f.supplier=a.part.supplier.id?a.part.supplier:j()?{name:a.part.supplier.name,contact:a.part.supplier.contact}:void 0,f.$save().then(function(b){a.part={category:{},supplier:{contact:{address:{}}},dimensions:[]},a.errors=[],d("number"),a.alert={type:"success",msg:"new.part.created"},c.cancel(i),i=c(function(){a.alert=null},3e3)},function(d){401!==d.status&&403!==d.status?a.errors=d.data:(c.cancel(i),b.dismiss("exit"))})},a.exit=function(){c.cancel(i),b.dismiss("exit")}}]).controller("PartEditController",["$scope","$modalInstance","$timeout","focus","edited","Part","Category","Supplier","Unit",function(a,b,c,d,e,f,g,h,i){a.categories=[],a.units=[],a.suppliers=[],a.part=e,a.errors=[],a.alert=null;var j=null;a.hint_categories=function(b){g.page({query:b}).$promise.then(function(b){a.categories=b.content})},a.hint_units=function(b){i.page({query:b}).$promise.then(function(b){a.units=b.content})},a.hint_suppliers=function(b){h.page({query:b}).$promise.then(function(b){a.suppliers=b.content})},a.categorySelect=function(b,c,d){a.part.category={id:b.id,name:b.name}},a.unitSelect=function(a,b,c,d){d.unit={id:a.id,name:a.name}},a.supplierSelect=function(b,c,d){a.part.supplier={id:b.id,name:b.name,contact:b.contact?{email:b.contact.email,web_site:b.contact.web_site,phone:b.contact.phone,address:b.contact.address?{country:b.contact.address.country,city:b.contact.address.city,postal_code:b.contact.address.postal_code,street:b.contact.address.street}:{}}:{address:{}}}},a.add_new_dimension=function(){a.part.dimensions.push({name:"",value:"",unit:{name:""}})},a.remove_dimension=function(b){a.part.dimensions.splice(a.part.dimensions.indexOf(b),1)},a.closeAlert=function(b){a.alerts.splice(b,1)},a.clear_unit_id=function(a){a.id=void 0},a.action_part=function(){f.update({id:a.part.id},a.part,function(b){a.part=b,a.errors=[],d("name"),a.alert={type:"success",msg:"part.edited"},c.cancel(j),j=c(function(){a.alert=null},3e3)},function(d){401!==d.status&&403!==d.status?a.errors=d.data:(c.cancel(j),b.dismiss("exit"))})},a.exit=function(){c.cancel(j),b.dismiss("exit")}}]).controller("PartSearchController",["$scope","$modalInstance","conditions","Supplier","Category","Part",function(a,b,c,d,e,f){a.categories=[],a.suppliers=[],a.parts=[],a.conditions=c,a.hint_categories=function(b){e.page({query:b}).$promise.then(function(b){a.categories=b.content})},a.hint_suppliers=function(b){d.page({query:b}).$promise.then(function(b){a.suppliers=b.content})},a.hint=function(b){f.page({query:b?b:void 0,number:c&&c.number?c.number:void 0,description:c&&c.description?c.description:void 0,category:c&&c.category?c.category:void 0,meterial:c&&c.material?c.material:void 0,supplier:c&&c.supplier?c.supplier:void 0}).$promise.then(function(b){a.parts=b.content})},a.ok=function(){b.close(a.conditions)},a.exit=function(){b.dismiss("exit")}}]),angular.module("myApp.controllers").controller("RequisitionsListController",["$scope","$stateParams","$modal","user","requisitions","Requisition",function(a,b,c,d,e,f){a.itemsPerPage=e.size,a.currentPage=e.number+1,a.maxSize=5,a.totalItems=e.totalElements,a.sort=e.sort[0]?e.sort[0].property:null,a.reverse=e.sort[0]?!e.sort[0].ascending:!1,a.requisitions=e.content,a.user=d,a.query=null,a.conditions=null,a.search=function(b,c,d){f.page({query:b?b:void 0,withNumber:c&&c.number?c.number:void 0,after:c&&c.after?c.after:void 0,before:c&&c.before?c.before:void 0,author:c&&c.author?c.author:void 0,status:c&&c.status?c.status:void 0,element:c&&c.element?c.element:void 0,drawing:c&&c.drawing?c.drawing:void 0,part:c&&c.part?c.part:void 0,description:c&&c.description?c.description:void 0,category:c&&c.category?c.category:void 0,meterial:c&&c.material?c.material:void 0,supplier:c&&c.supplier?c.supplier:void 0,page:d-1,size:a.itemsPerPage,direction:a.reverse?"DESC":"ASC",property:a.sort}).$promise.then(function(b){a.itemsPerPage=b.size,a.currentPage=b.number+1,a.totalItems=b.totalElements,a.sort=b.sort[0]?b.sort[0].property:null,a.reverse=b.sort[0]?!b.sort[0].ascending:!1,a.requisitions=b.content})},a.clear_search=function(){a.query="",a.search(a.query,a.conditions,1)},a.reverse_order=function(){a.reverse=!a.reverse,a.search(a.query,a.conditions,a.currentPage)},a.change_sort=function(){a.search(a.query,a.conditions,a.currentPage)},a.basic_search=function(){a.conditions=null,a.search(a.query,a.conditions,1)},a.clear_condition=function(b){a.conditions[b]=null,a.search(a.query,a.conditions,1)},a.open_create_requisition_form=function(){var b=c.open({animation:!0,templateUrl:"partials/requisition/requisition.html",controller:"RequisitionAddController"});b.result.then(function(){},function(){a.search(a.query,a.conditions,a.currentPage)})},a.open_edit_requisition_form=function(b){var d=c.open({animation:!0,templateUrl:"partials/requisition/requisition.html",controller:"RequisitionEditController",resolve:{edited:function(){return b}}});d.result.then(function(){},function(){a.search(a.query,a.conditions,a.currentPage)})},a.open_search_requisition_form=function(){var b=c.open({animation:!0,templateUrl:"partials/requisition/searchRequisition.html",controller:"RequisitionSearchController",resolve:{conditions:function(){return a.conditions}}});b.result.then(function(b){a.conditions=b,a.query=null,a.search(a.query,a.conditions,1)})},a.history=function(b){f.history({number:b.number},function(b){a.itemsPerPage=b.size,a.currentPage=b.number+1,a.totalItems=b.totalElements,a.sort=b.sort[0]?b.sort[0].property:null,a.reverse=b.sort[0]?!b.sort[0].ascending:!1,a.requisitions=b.content})},a.canEditRequisition=function(b){return void 0!==b&&null!==b?a.user.id==b.author.id||"ADMIN"==a.user.role:!1},a.delete_requisition=function(b){f.remove({number:b.number}).$promise.then(function(){a.search(a.query,a.conditions,a.currentPage)},function(a){401!==a.status&&403!==a.status&&c.open({animation:!0,templateUrl:"partials/error.html",controller:"ErrorController",resolve:{error:function(){return a}}})})}}]).controller("RequisitionAddController",["$scope","$modalInstance","$timeout","focus","Requisition","Part","Category","Supplier","Unit","Drawing",function(a,b,c,d,e,f,g,h,i,j){a.parts=[],a.categories=[],a.suppliers=[],a.units=[],a.drawings=[],a.requisition={unit:{},drawing:{},part:{category:{},supplier:{contact:{address:{}}},dimensions:[]}},a.errors=[],a.alert=null;var k=null;a.hint_parts=function(b){f.page({query:b}).$promise.then(function(b){a.parts=b.content})},a.hint_categories=function(b){g.page({query:b}).$promise.then(function(b){a.categories=b.content})},a.hint_units=function(b){i.page({query:b}).$promise.then(function(b){a.units=b.content})},a.hint_suppliers=function(b){h.page({query:b}).$promise.then(function(b){a.suppliers=b.content})},a.hint_drawings=function(b){j.page({query:b}).$promise.then(function(b){a.drawings=b.content})},a.hint=function(b){e.page({query:b?b:void 0,number:conditions&&conditions.number?conditions.number:void 0,after:conditions&&conditions.after?conditions.after:void 0,before:conditions&&conditions.before?conditions.before:void 0,author:conditions&&conditions.author?conditions.author:void 0,status:conditions&&conditions.status?conditions.status:void 0,element:conditions&&conditions.element?conditions.element:void 0,drawing:conditions&&conditions.drawing?conditions.drawing:void 0,part:conditions&&conditions.part?conditions.part:void 0,description:conditions&&conditions.description?conditions.description:void 0,category:conditions&&conditions.category?conditions.category:void 0,meterial:conditions&&conditions.material?conditions.material:void 0,supplier:conditions&&conditions.supplier?conditions.supplier:void 0}).$promise.then(function(b){a.requisitions=b.content})},a.partSelect=function(b,c,d){a.requisition.part={id:b.id,number:b.number,description:b.description,category:b.category?{id:b.category.id,name:b.category.name}:void 0,dimensions:b.dimensions,material:b.material,supplier:b.supplier?{id:b.supplier.id,name:b.supplier.name,contact:b.supplier.contact?{email:b.supplier.contact.email,web_site:b.supplier.contact.web_site,phone:b.supplier.contact.phone,address:b.supplier.contact.address?{country:b.supplier.contact.address.country,city:b.supplier.contact.address.city,postal_code:b.supplier.contact.address.postal_code,street:b.supplier.contact.address.street}:{}}:{address:{}}}:void 0}},a.supplierSelect=function(b,c,d){a.requisition.part.supplier={id:b.id,name:b.name,contact:b.contact?{email:b.contact.email,web_site:b.contact.web_site,phone:b.contact.phone,address:b.contact.address?{country:b.contact.address.country,city:b.contact.address.city,postal_code:b.contact.address.postal_code,street:b.contact.address.street}:{}}:{address:{}}}},a.categorySelect=function(b,c,d){a.requisition.part.category={id:b.id,name:b.name}},a.requisitionUnitSelect=function(b,c,d){a.requisition.unit={id:b.id,name:b.name}},a.dimensionUnitSelect=function(a,b,c,d){d.unit={id:a.id,name:a.name}},a.drawingSelect=function(b,c,d){a.requisition.drawing={id:b.id,number:b.number}},a.add_new_dimension=function(){a.requisition.part.dimensions.push({name:"",value:"",unit:{name:""}})},a.remove_dimension=function(b){a.requisition.part.dimensions.splice(a.requisition.part.dimensions.indexOf(b),1)};var l=function(){return!a.requisition.part.supplier.id&&(a.requisition.part.supplier.name||a.requisition.part.supplier.contact.email||a.requisition.part.supplier.contact.web_site||a.requisition.part.supplier.contact.phone||a.requisition.part.supplier.contact.address.country||a.requisition.part.supplier.contact.address.city||a.requisition.part.supplier.contact.address.postal_code||a.requisition.part.supplier.contact.address.street)};a.action_requisition=function(){var f=new e;f.element=a.requisition.element,f.amount=a.requisition.amount,f.unit=a.requisition.unit,f.drawing=a.requisition.drawing,f.comment=a.requisition.comment,f.part=a.requisition.part.id?{id:a.requisition.part.id}:{number:a.requisition.part.number,description:a.requisition.part.description,category:a.requisition.part.category.id?a.requisition.part.category:a.requisition.part.category.name?{name:a.requisition.part.category.name}:void 0,dimensions:a.requisition.part.dimensions,material:a.requisition.part.material,supplier:a.requisition.part.supplier.id?a.requisition.part.supplier:l()?{name:a.requisition.part.supplier.name,contact:a.requisition.part.supplier.contact}:void 0},f.$save().then(function(b){a.requisition={unit:{},drawing:{},part:{category:{},supplier:{contact:{address:{}}},dimensions:[]}},a.errors=[],d("element"),a.alert={type:"success",msg:"new.requisition.created"},c.cancel(k),c(function(){a.alert=null},3e3)},function(d){401!==d.status&&403!==d.status?a.errors=d.data:(c.cancel(k),b.dismiss("exit"))})},a.exit=function(){c.cancel(k),b.dismiss("exit")}}]).controller("RequisitionEditController",["$scope","$modalInstance","$timeout","focus","edited","Requisition","Part","Category","Supplier","Unit","Drawing",function(a,b,c,d,e,f,g,h,i,j,k){a.parts=[],a.categories=[],a.suppliers=[],a.units=[],a.drawings=[],a.statuses=[],a.requisition=e,a.errors=[],a.alert=null;var l=null;a.hint_parts=function(b){g.page({query:b}).$promise.then(function(b){a.parts=b.content})},a.hint_categories=function(b){h.page({query:b}).$promise.then(function(b){a.categories=b.content})},a.hint_units=function(b){j.page({query:b}).$promise.then(function(b){a.units=b.content})},a.hint_suppliers=function(b){i.page({query:b}).$promise.then(function(b){a.suppliers=b.content})},a.hint_drawings=function(b){k.page({query:b}).$promise.then(function(b){a.drawings=b.content})},f.statuses(function(b){a.statuses=b?b:null}),a.hint=function(b){f.page({query:b?b:void 0,number:conditions&&conditions.number?conditions.number:void 0,after:conditions&&conditions.after?conditions.after:void 0,before:conditions&&conditions.before?conditions.before:void 0,author:conditions&&conditions.author?conditions.author:void 0,status:conditions&&conditions.status?conditions.status:void 0,element:conditions&&conditions.element?conditions.element:void 0,drawing:conditions&&conditions.drawing?conditions.drawing:void 0,part:conditions&&conditions.part?conditions.part:void 0,description:conditions&&conditions.description?conditions.description:void 0,category:conditions&&conditions.category?conditions.category:void 0,meterial:conditions&&conditions.material?conditions.material:void 0,supplier:conditions&&conditions.supplier?conditions.supplier:void 0}).$promise.then(function(b){a.requisitions=b.content})},a.partSelect=function(b,c,d){a.requisition.part={id:b.id,number:b.number,description:b.description,category:b.category?{id:b.category.id,name:b.category.name}:void 0,dimensions:b.dimensions,material:b.material,supplier:b.supplier?{id:b.supplier.id,name:b.supplier.name,contact:b.supplier.contact?{email:b.supplier.contact.email,web_site:b.supplier.contact.web_site,phone:b.supplier.contact.phone,address:b.supplier.contact.address?{country:b.supplier.contact.address.country,city:b.supplier.contact.address.city,postal_code:b.supplier.contact.address.postal_code,street:b.supplier.contact.address.street}:{}}:{address:{}}}:void 0}},a.supplierSelect=function(b,c,d){a.requisition.part.supplier={id:b.id,name:b.name,contact:b.contact?{email:b.contact.email,web_site:b.contact.web_site,phone:b.contact.phone,address:b.contact.address?{country:b.contact.address.country,city:b.contact.address.city,postal_code:b.contact.address.postal_code,street:b.contact.address.street}:{}}:{address:{}}}},a.categorySelect=function(b,c,d){a.requisition.part.category={id:b.id,name:b.name}},a.requisitionUnitSelect=function(b,c,d){a.requisition.unit={id:b.id,name:b.name}},a.dimensionUnitSelect=function(a,b,c,d){d.unit={id:a.id,name:a.name}},a.drawingSelect=function(b,c,d){a.requisition.drawing={id:b.id,number:b.number}},a.add_new_dimension=function(){a.requisition.part.dimensions.push({name:"",value:"",unit:{name:""}})},a.remove_dimension=function(b){a.requisition.part.dimensions.splice(a.requisition.part.dimensions.indexOf(b),1)};a.action_requisition=function(){f.update({number:a.requisition.number},a.requisition,function(b){a.requisition=b,a.errors=[],d("element"),a.alert={type:"success",msg:"requisition.edited"},c.cancel(l),c(function(){a.alert=null},3e3)},function(d){401!==d.status&&403!==d.status?a.errors=d.data:(c.cancel(l),b.dismiss("exit"))})},a.exit=function(){c.cancel(l),b.dismiss("exit")}}]).controller("RequisitionSearchController",["$scope","$modalInstance","conditions","Part","Supplier","Category","Drawing","Requisition",function(a,b,c,d,e,f,g,h){a.drawings=[],a.categories=[],a.suppliers=[],a.parts=[],a.statuses=[],a.conditions=c,a.after_opened=!1,a.before_opened=!1,a.after="",a.before="",a.hint_parts=function(b){d.page({query:b}).$promise.then(function(b){a.parts=b.content})},a.hint_categories=function(b){f.page({query:b}).$promise.then(function(b){a.categories=b.content})},a.hint_suppliers=function(b){e.page({query:b}).$promise.then(function(b){a.suppliers=b.content})},a.hint_drawings=function(b){g.page({query:b}).$promise.then(function(b){a.drawings=b.content})},h.statuses(function(b){a.statuses=b?b:null}),a.hint=function(b){h.page({query:b?b:void 0,number:c&&c.number?c.number:void 0,after:c&&c.after?c.after:void 0,before:c&&c.before?c.before:void 0,author:c&&c.author?c.author:void 0,status:c&&c.status?c.status:void 0,element:c&&c.element?c.element:void 0,drawing:c&&c.drawing?c.drawing:void 0,part:c&&c.part?c.part:void 0,description:c&&c.description?c.description:void 0,category:c&&c.category?c.category:void 0,meterial:c&&c.material?c.material:void 0,supplier:c&&c.supplier?c.supplier:void 0}).$promise.then(function(b){a.requisitions=b.content})},a.open_after=function(b){b.preventDefault(),b.stopPropagation(),a.after_opened=!0},a.open_before=function(b){b.preventDefault(),b.stopPropagation(),a.before_opened=!0},a.toTimestamp=function(a){return a?new Date(a).getTime():null},a.ok=function(){a.conditions.after=a.toTimestamp(a.after),a.conditions.before=a.toTimestamp(a.before),b.close(a.conditions)},a.exit=function(){b.dismiss("exit")}}]),angular.module("myApp.controllers").controller("SuppliersListController",["$scope","$modal","user","suppliers","Supplier",function(a,b,c,d,e){a.itemsPerPage=d.size,a.currentPage=d.number+1,a.maxSize=5,a.totalItems=d.totalElements,a.sort=d.sort[0]?d.sort[0].property:null,a.reverse=d.sort[0]?!d.sort[0].ascending:!1,a.suppliers=d.content,a.user=c,a.query=null,a.conditions=null,a.search=function(b,c,d){e.page({query:b?b:void 0,name:c&&c.name?c.name:void 0,email:c&&c.email?c.email:void 0,web_site:c&&c.web_site?c.web_site:void 0,phone:c&&c.phone?c.phone:void 0,country:c&&c.country?c.country:void 0,city:c&&c.city?c.city:void 0,street:c&&c.street?c.street:void 0,page:d-1,size:a.itemsPerPage,direction:a.reverse?"DESC":"ASC",property:a.sort}).$promise.then(function(b){a.itemsPerPage=b.size,a.currentPage=b.number+1,a.totalItems=b.totalElements,a.sort=b.sort[0]?b.sort[0].property:null,a.reverse=b.sort[0]?!b.sort[0].ascending:!1,a.suppliers=b.content})},a.clear_search=function(){a.query="",a.search(a.query,a.conditions,1)},a.reverse_order=function(){a.reverse=!a.reverse,a.search(a.query,a.conditions,a.currentPage)},a.change_sort=function(){a.search(a.query,a.conditions,a.currentPage)},a.basic_search=function(){a.conditions=null,a.search(a.query,a.conditions,1)},a.clear_condition=function(b){a.conditions[b]=null,a.search(a.query,a.conditions,1)},a.open_create_supplier_form=function(){var c=b.open({animation:!0,templateUrl:"partials/supplier/supplier.html",controller:"SupplierAddController"});c.result.then(function(){},function(){a.search(a.query,a.conditions,a.currentPage)})},a.open_edit_supplier_form=function(c){var d=b.open({animation:!0,templateUrl:"partials/supplier/supplier.html",controller:"SupplierEditController",resolve:{edited:function(){return c}}});d.result.then(function(){},function(){a.search(a.query,a.conditions,a.currentPage)})},a.open_search_supplier_form=function(){var c=b.open({animation:!0,templateUrl:"partials/supplier/searchSupplier.html",controller:"SupplierSearchController",
resolve:{conditions:function(){return a.conditions}}});c.result.then(function(b){a.conditions=b,a.query=null,a.search(a.query,a.conditions,1)})},a.delete_supplier=function(c){e.remove({},{id:c.id},function(){a.search(a.query,a.conditions,a.currentPage)},function(a){401!==a.status&&403!==a.status&&b.open({animation:!0,templateUrl:"partials/error.html",controller:"ErrorController",resolve:{error:function(){return a}}})})}}]).controller("SupplierAddController",["$scope","$modalInstance","$timeout","focus","Supplier",function(a,b,c,d,e){a.supplier={contact:{address:{}}},a.errors=[],a.alert=null;var f=null;a.action_supplier=function(){new e({name:a.supplier.name,contact:a.supplier.contact}).$save().then(function(b){a.supplier={contact:{address:{}}},a.errors=[],d("name"),a.alert={type:"success",msg:"new.supplier.created"},c.cancel(f),f=c(function(){a.alert=null},3e3)},function(d){401!==d.status&&403!==d.status?a.errors=d.data:(c.cancel(f),b.dismiss("exit"))})},a.exit=function(){c.cancel(f),b.dismiss("exit")}}]).controller("SupplierEditController",["$scope","$modalInstance","$timeout","focus","edited","Supplier",function(a,b,c,d,e,f){a.supplier=e,a.errors=[],a.alert=null;var g=null;a.action_supplier=function(){f.update({id:a.supplier.id},a.supplier,function(b){a.supplier=b,a.errors=[],d("name"),a.alert={type:"success",msg:"supplier.edited"},c.cancel(g),g=c(function(){a.alert=null},3e3)},function(d){401!==d.status&&403!==d.status?a.errors=d.data:(c.cancel(g),b.dismiss("exit"))})},a.exit=function(){c.cancel(g),b.dismiss("exit")}}]).controller("SupplierSearchController",["$scope","$modalInstance","conditions","Supplier",function(a,b,c,d){a.conditions=c,a.suppliers=[],a.hints=function(b){d.page({query:b,name:c&&c.name?c.name:void 0,email:c&&c.email?c.email:void 0,web_site:c&&c.web_site?c.web_site:void 0,phone:c&&c.phone?c.phone:void 0,country:c&&c.country?c.country:void 0,city:c&&c.city?c.city:void 0,street:c&&c.street?c.street:void 0}).$promise.then(function(b){a.suppliers=b.content})},a.ok=function(){b.close(a.conditions)},a.exit=function(){b.dismiss("exit")}}]),angular.module("myApp.controllers").controller("UnitsListController",["$scope","$modal","user","units","Unit",function(a,b,c,d,e){a.itemsPerPage=d.size,a.currentPage=d.number+1,a.maxSize=5,a.totalItems=d.totalElements,a.sort=d.sort[0]?d.sort[0].property:null,a.reverse=d.sort[0]?!d.sort[0].ascending:!1,a.units=d.content,a.user=c,a.query=null,a.search=function(b,c){e.page({query:b?b:void 0,page:c-1,size:a.itemsPerPage,direction:a.reverse?"DESC":"ASC",property:a.sort}).$promise.then(function(b){a.itemsPerPage=b.size,a.currentPage=b.number+1,a.totalItems=b.totalElements,a.sort=b.sort[0]?b.sort[0].property:null,a.reverse=b.sort[0]?!b.sort[0].ascending:!1,a.units=b.content})},a.clear_search=function(){a.query=null,a.search(a.query,1)},a.reverse_order=function(){a.reverse=!a.reverse,a.search(a.query,a.currentPage)},a.open_create_unit_form=function(){var c=b.open({animation:!0,templateUrl:"partials/unit/unit.html",controller:"UnitAddController"});c.result.then(function(){},function(){a.search(a.query,a.currentPage)})},a.open_edit_unit_form=function(c){var d=b.open({animation:!0,templateUrl:"partials/unit/unit.html",controller:"UnitEditController",resolve:{edited:function(){return c}}});d.result.then(function(){},function(){a.search(a.query,a.currentPage)})},a.delete_unit=function(c){e.remove({id:c.id}).$promise.then(function(b){a.search(a.query,a.currentPage)},function(a){401!==a.status&&403!==a.status&&b.open({animation:!0,templateUrl:"partials/error.html",controller:"ErrorController",resolve:{error:function(){return a}}})})}}]).controller("UnitAddController",["$scope","$modalInstance","$timeout","focus","Unit",function(a,b,c,d,e){a.unit={},a.errors=[],a.alert=null;var f=null;a.action_unit=function(){new e({name:a.unit.name}).$save().then(function(b){a.unit={},a.errors=[],d("name"),a.alert={type:"success",msg:"new.unit.created"},c.cancel(f),f=c(function(){a.alert=null},3e3)},function(d){401!==d.status&&403!==d.status?a.errors=d.data:(c.cancel(f),b.dismiss("exit"))})},a.exit=function(){c.cancel(f),b.dismiss("exit")}}]).controller("UnitEditController",["$scope","$modalInstance","$timeout","focus","edited","Unit",function(a,b,c,d,e,f){a.unit=e,a.errors=[],a.alert=null;var g=null;a.action_unit=function(){f.update({id:a.unit.id},a.unit).$promise.then(function(b){a.unit=b,a.errors=[],d("name"),a.alert={type:"success",msg:"unit.edited"},c.cancel(g),g=c(function(){a.alert=null},3e3)},function(d){401!==d.status&&403!==d.status?a.errors=d.data:(c.cancel(g),b.dismiss("exit"))})},a.exit=function(){c.cancel(g),b.dismiss("exit")}}]),angular.module("myApp.services").factory("Account",["$resource",function(a){return a("/api/accounts/:id",{id:"@id"},{page:{method:"GET",isArray:!1},update:{method:"PUT"},my:{url:"/api/accounts/my",method:"GET"},changeMyPassword:{url:"/api/accounts/my/password",method:"PUT"},roles:{url:"api/accounts/roles",method:"GET",isArray:!0}})}]),angular.module("myApp.services").factory("Category",["$resource",function(a){return a("/api/categories/:id",{id:"@id"},{update:{method:"PUT"},page:{method:"GET",isArray:!1}})}]),angular.module("myApp.services").factory("Drawing",["$resource",function(a){return a("/api/drawings/:id",{id:"@id"},{page:{method:"GET",isArray:!1},update:{method:"PUT"}})}]),angular.module("myApp.services").factory("focus",["$timeout","$window",function(a,b){return function(c){a(function(){var a=b.document.getElementById(c);a&&a.focus()})}}]),angular.module("myApp").factory("Interceptor",["$q","$injector","TokenStore",function(a,b,c){return{request:function(a){var b=c.retrieve();return b&&(a.headers["X-AUTH-TOKEN"]=b),a},response:function(b){return b||a.when(b)},responseError:function(c){return 401===c.status?b.get("$state").go("login",null,{reload:!0}):403===c.status&&b.get("$state").go("authenticated.forbidden",null,{reload:!0}),a.reject(c)}}}]),angular.module("myApp.services").factory("Part",["$resource",function(a){return a("/api/parts/:id",{id:"@id"},{page:{method:"GET",isArray:!1},update:{method:"PUT"}})}]),angular.module("myApp.services").factory("Requisition",["$resource",function(a){return a("/api/requisitions/:number",{number:"@number"},{page:{method:"GET",isArray:!1},update:{method:"PUT"},statuses:{url:"/api/requisitions/statuses",method:"GET",isArray:!0},history:{url:"/api/requisitions/:number/history",method:"GET",isArray:!1}})}]),angular.module("myApp.services").factory("Supplier",["$resource",function(a){return a("/api/suppliers/:id",{id:"@id"},{update:{method:"PUT"},page:{method:"GET",isArray:!1}})}]),angular.module("myApp.services").factory("TokenStore",function(){var a="auth_token";return{store:function(b){return localStorage.setItem(a,b)},retrieve:function(){return localStorage.getItem(a)},clear:function(){return localStorage.removeItem(a)}}}),angular.module("myApp.services").factory("Unit",["$resource",function(a){return a("/api/units/:id",{id:"@id"},{page:{method:"GET",isArray:!1},update:{method:"PUT"}})}]),angular.module("myApp").config(["$stateProvider","$httpProvider","$translateProvider",function(a,b,c){c.useStaticFilesLoader({prefix:"/languages/locale-",suffix:".json"}),c.preferredLanguage("pl_PL"),c.useSanitizeValueStrategy("escape"),c.useMissingTranslationHandlerLog(),c.useLocalStorage(),b.interceptors.push("Interceptor"),a.state("login",{url:"/login",views:{"content@":{templateUrl:"/partials/login.html",controller:"LoginController"}}}).state("authenticated",{url:"","abstract":!0,resolve:{Account:"Account",user:["Account",function(a){return a.my().$promise}]},views:{"navbar@":{templateUrl:"/partials/navbar.html",controller:"AuthenticationController"}}}).state("authenticated.forbidden",{url:"/forbidden",resolve:{user:["user",function(a){return a}]},views:{"content@":{templateUrl:"/partials/forbidden.html",controller:"ForbiddenController"}}}).state("authenticated.units",{url:"/units",resolve:{Unit:"Unit",units:["Unit",function(a){return a.page().$promise}],user:["user",function(a){return a}]},views:{"content@":{templateUrl:"/partials/unit/listUnits.html",controller:"UnitsListController"}}}).state("authenticated.categories",{url:"/categories",resolve:{Category:"Category",categories:["Category",function(a){return a.page().$promise}],user:["user",function(a){return a}]},views:{"content@":{templateUrl:"/partials/category/listCategories.html",controller:"CategoriesListController"}}}).state("authenticated.suppliers",{url:"/suppliers",resolve:{Supplier:"Supplier",suppliers:["Supplier",function(a){return a.page().$promise}],user:["user",function(a){return a}]},views:{"content@":{templateUrl:"partials/supplier/listSuppliers.html",controller:"SuppliersListController"}}}).state("authenticated.drawings",{url:"/drawings",resolve:{Drawing:"Drawing",drawings:["Drawing",function(a){return a.page().$promise}],user:["user",function(a){return a}]},views:{"content@":{templateUrl:"/partials/drawing/listDrawings.html",controller:"DrawingsListController"}}}).state("authenticated.parts",{url:"/parts",resolve:{Part:"Part",parts:["Part",function(a){return a.page().$promise}],user:["user",function(a){return a}]},views:{"content@":{templateUrl:"/partials/part/listParts.html",controller:"PartsListController"}}}).state("authenticated.requisitions",{url:"/requisitions",resolve:{Requisition:"Requisition",requisitions:["Requisition",function(a){return a.page().$promise}],user:["user",function(a){return a}]},views:{"content@":{templateUrl:"/partials/requisition/listRequisitions.html",controller:"RequisitionsListController"}}}).state("authenticated.accounts",{url:"/accounts",resolve:{Account:"Account",accounts:["Account",function(a){return a.page().$promise}],user:["user",function(a){return a}]},views:{"content@":{templateUrl:"/partials/account/listAccounts.html",controller:"AccountsListController"}}})}]).run(["$state",function(a){a.go("login")}]);